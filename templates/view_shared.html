{% extends 'base.html' %} {% block title %}View Shared Dataset - {{ dataset.name
}} - Epidemic Monitoring{% endblock %} {% block head %}
<style>
  .tab-content {
    display: none;
  }
  .tab-content.active {
    display: block;
  }
</style>
{% endblock %} {% block content %}
<div>
  <h1 class="text-3xl font-bold mb-2">{{ dataset.name }}</h1>
  <p class="text-gray-600 mb-6">Shared by {{ dataset.owner.username }}</p>

  {% if dataset.description %}
  <div class="mb-6 bg-blue-50 p-4 rounded-lg">
    <p class="text-gray-700">{{ dataset.description }}</p>
  </div>
  {% endif %}

  <div class="bg-white p-6 rounded-lg shadow-md mb-8">
    <div class="flex border-b mb-6">
      <button
        class="tab-button py-2 px-4 border-b-2 border-blue-600 text-blue-600 font-medium"
        data-tab="chart-view"
      >
        Chart View
      </button>
      <button
        class="tab-button py-2 px-4 border-b-2 border-transparent hover:text-blue-600"
        data-tab="map-view"
      >
        Map View
      </button>
    </div>

    <div class="tab-content active" id="chart-view">
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-4">Customize Chart</h2>
        <div class="flex flex-wrap gap-4">
          <div class="w-full md:w-48">
            <label for="chart-type" class="block text-gray-700 font-medium mb-2"
              >Chart Type</label
            >
            <select
              id="chart-type"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="line">Line Chart</option>
              <option value="bar">Bar Chart</option>
              <option value="pie">Pie Chart</option>
            </select>
          </div>

          <div class="w-full md:w-48">
            <label for="data-field" class="block text-gray-700 font-medium mb-2"
              >Data Field</label
            >
            <select
              id="data-field"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="cases">Cases</option>
              <option value="deaths">Deaths</option>
              <option value="recovered">Recovered</option>
              <option value="hospitalized">Hospitalized</option>
              <option value="tested">Tested</option>
            </select>
          </div>

          <div class="w-full md:w-48">
            <label for="group-by" class="block text-gray-700 font-medium mb-2"
              >Group By</label
            >
            <select
              id="group-by"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="date">Date</option>
              <option value="location">Location</option>
            </select>
          </div>
        </div>
      </div>

      <div class="h-96 relative">
        <canvas id="chart-container"></canvas>
      </div>
    </div>

    <div class="tab-content" id="map-view">
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-4">Map Settings</h2>
        <div class="flex flex-wrap gap-4">
          <div class="w-full md:w-48">
            <label
              for="map-data-field"
              class="block text-gray-700 font-medium mb-2"
              >Data Field</label
            >
            <select
              id="map-data-field"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="cases">Cases</option>
              <option value="deaths">Deaths</option>
              <option value="recovered">Recovered</option>
              <option value="hospitalized">Hospitalized</option>
              <option value="tested">Tested</option>
            </select>
          </div>

          <div class="w-full md:w-48">
            <label
              for="map-view-type"
              class="block text-gray-700 font-medium mb-2"
              >View Type</label
            >
            <select
              id="map-view-type"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="markers">Markers</option>
              <option value="heatmap">Heatmap</option>
            </select>
          </div>

          <div class="w-full md:w-48">
            <label
              for="date-filter"
              class="block text-gray-700 font-medium mb-2"
              >Date Filter</label
            >
            <input
              type="date"
              id="date-filter"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>
        </div>
      </div>

      <div id="map-container" class="h-96 rounded-lg border"></div>
    </div>
  </div>

  <div class="bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold mb-4">Raw Data</h2>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200" id="data-table">
        <thead class="bg-gray-100">
          <tr id="data-header"></tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200" id="data-body"></tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  const datasetId = {{ dataset.id }};
</script>
<script src="{{ url_for('static', filename='js/visualize.js') }}"></script>
{% endblock %}
